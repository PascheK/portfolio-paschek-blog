---
title: "Concevoir un portfolio multilingue thémé avec Next.js"
publishedAt: "2025-09-28"
summary: "Décisions d’architecture derrière un portfolio bilingue, piloté par MDX, avec UI accessible et UX animée."
tags: "nextjs,i18n,architecture,mdx,design-system"
image: "/opengraph-image.png"
---

> Exploration détaillée de la structure : routage linguistique, chargement de contenu, tokens de thème et filtrage des projets.

## 1. Objectifs & Contraintes

Je voulais un portfolio qui :

- Sert anglais et français depuis une seule base de code.
- Traite le contenu (blog + projets + page à propos) comme **données d’abord**.
- Supporte MDX pour du riche long format et l’embed de composants.
- Fournit un filtre de catégories fiable sans état obsolète.
- Offre un thème sombre + un thème clair étendu via **design tokens** (OKLCH).
- Donne une bonne performance perçue (transitions de page rapides, animations).
- Reste maintenable : pas de sur‑ingénierie, couches claires.

Contrainte clé : rester orienté génération statique (SSG) tout en gérant les segments de langue.

## 2. Vue d’ensemble de l’architecture

```
app/[lang]/
  page.tsx          # Accueil (hero + projets mis en avant)
  blog/             # Index blog + [slug]
  projects/         # Index projets + [slug]
  about/            # Page mini‑CV
content/
  blog/{en,fr}/*.mdx
  projects/{en,fr}/*.mdx
app/[lang]/dictionaries/{en,fr}.json
lib/
  posts.ts          # Parsing MDX & normalisation frontmatter
  dictionaries.ts   # Chargement runtime des dictionnaires
  config.ts         # Métadonnées globales & liens sociaux
components/         # UI + reveal + navigation
```

Principe : **tout le texte est externalisé** (MDX ou dictionnaires JSON). Les composants restent de présentation.

## 3. Stratégie i18n

- Routage par segment : `/[lang]/...` avec `generateStaticParams()` → `['en','fr']`.
- Dictionnaires par langue chargés côté serveur via un helper simple.
- Contenu MDX rangé par langue pour blog et projets.
- Slugs spécifiques à la langue (pas d’auto‑traduction implicite).
- Amélioration future : test automatique de parité des clés pour prévenir les oublis.

## 4. Pipeline contenu (MDX)

Parser minimal dans `lib/posts.ts` : normalisation de `date` → `publishedAt`, extraction frontmatter par RegExp.
Pas de `gray-matter` pour garder la surface faible (remplaçable plus tard au besoin).

Blog & projets partagent la même structure `{ metadata, slug, content }` → rendu unifié.

## 5. Theming via Tokens

Tokens définis dans `:root` (clair) puis overrides dans `.dark` : couleurs OKLCH + surfaces (`--surface`, `--surface-alt`, etc.).
Utilitaires (`bg-surface`, `border-base`) pour un pont vers Tailwind. `next-themes` gère la classe `dark` sans flash.

## 6. Navigation accessible & mobile

- Piège de focus dans le panneau mobile.
- Gestion Escape + clic extérieur.
- Rôles / attributs sémantiques (`nav`, `aria-*`).
- Soulignement dégradé dynamique pour la route active.

## 7. Filtrage projets dérivé pur

Problème initial : filtrage cumulatif mutait la liste courante → impossible de retrouver l’état « Tous » correctement.
Solution : conserver `allProjects` et dériver :

```ts
const filteredProjects = useMemo(
  () =>
    selected === "__all__"
      ? allProjects
      : allProjects.filter((p) => categoriesOf(p).includes(selected)),
  [allProjects, selected]
);
```

Option (plus tard) : synchronisation URL + écoute `popstate` sans double mise à jour.

## 8. Layout partagé (Blog & Projets)

- Image de couverture (si fournie)
- Titre gradient
- Date localisée (fallback date courante si manquante)
- Résumé
- Corps MDX stylé via `prose`
- JSON-LD pour SEO

Cohérence UX + theming plus simple.

## 9. Page À propos structurée

Sections issues des tableaux du dictionnaire (`experiences`, `skills.items`, `education.items`). Traduction ou réorganisation = éditer JSON.

## 10. Performance & vitesse perçue

- Génération statique multi‑langue.
- Parsing MDX minimal.
- Animations échelonnées pour réduire la perception de latence.
- Idées futures : placeholders blur d’images, code splitting ciblé.

## 11. Accessibilité

- Clés alt descriptives (`imageAlt`).
- Navigation clavier complète.
- États de focus visibles.
- Amélioration future : respect `prefers-reduced-motion`.

## 12. Leçons

| Domaine  | Enseignement                                     |
| -------- | ------------------------------------------------ |
| Filtrage | Dériver, ne jamais muter la collection originale |
| i18n     | Frontières explicites, pas de magie de fallback  |
| Thème    | Introduire tôt des tokens de surface             |
| Contenu  | MDX + dictionnaires couvrent 95% des besoins     |
| Layout   | Modèle partagé = cohérence et maintenance        |

## 13. Pistes roadmap

- Test de parité de clés i18n (CI)
- Système de tags + pages d’archives
- Breadcrumbs + enrichissement schema.org
- Génération d’images OG dynamiques route handler
- Recherche client (index JSON + fuse.js)
- Placeholders blur d’images

## 14. Conclusion

Architecture pensée pour l’équilibre simplicité / extensibilité : frontières explicites (lang / contenu / thème) sans couches inutiles. Ajout d’une langue ou d’un nouveau type de contenu reste incrémental.

---

Question sur une section ? Ouvre une issue ou contacte‑moi.
